---
import type { CollectionEntry } from 'astro:content';
import Card from '@/components/ui/Card.astro';
import Badge from '@/components/ui/Badge.astro';
import Button from '@/components/ui/Button.astro';

interface Props {
	projects: CollectionEntry<'projects'>[];
}

const { projects } = Astro.props;
---

{projects.length > 0 && (
	<section class="py-20 bg-muted/30">
		<div class="container mx-auto px-4">
			<!-- Section header -->
			<div class="mb-12 text-center space-y-4">
				<h2 class="font-display text-4xl font-bold sm:text-5xl">
					Featured <span class="gradient-text">Projects</span>
				</h2>
				<p class="text-lg text-foreground/70 max-w-2xl mx-auto">
					A selection of projects I've built, showcasing my skills in full-stack development.
				</p>
			</div>

			<!-- Projects grid -->
			<div class="grid gap-8 md:grid-cols-2 lg:grid-cols-2 mb-12">
				{projects.map((project) => (
					<a href={`/projects/${project.slug}`} class="group block">
						<Card hover>
							<div class="space-y-4">
								{/* Featured image */}
								{project.data.image && (
									<div class="aspect-video w-full overflow-hidden rounded-lg bg-muted">
										<img
											src={project.data.image}
											alt={project.data.title}
											class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
										/>
									</div>
								)}

								{/* Title */}
								<h3 class="font-display text-2xl font-bold leading-tight group-hover:text-primary transition-colors">
									{project.data.title}
								</h3>

								{/* Description */}
								<p class="text-foreground/70 line-clamp-2">
									{project.data.description}
								</p>

								{/* Tech stack */}
								{project.data.techStack && project.data.techStack.length > 0 && (
									<div class="flex flex-wrap gap-2">
										{project.data.techStack.slice(0, 4).map((tech) => (
											<Badge variant="default">{tech}</Badge>
										))}
										{project.data.techStack.length > 4 && (
											<Badge variant="default">+{project.data.techStack.length - 4}</Badge>
										)}
									</div>
								)}

								{/* Links */}
								<div class="flex gap-3 pt-2">
									{project.data.demoUrl && (
										<span class="inline-flex items-center text-sm text-primary hover:underline">
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
												<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
												<polyline points="15 3 21 3 21 9"></polyline>
												<line x1="10" x2="21" y1="14" y2="3"></line>
											</svg>
											Live Demo
										</span>
									)}
									{project.data.githubUrl && (
										<span class="inline-flex items-center text-sm text-foreground/70 hover:text-primary">
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
												<path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path>
												<path d="M9 18c-4.51 2-5-2-7-2"></path>
											</svg>
											Code
										</span>
									)}
								</div>
							</div>
						</Card>
					</a>
				))}
			</div>

			<!-- View all button -->
			<div class="text-center">
				<Button variant="outline" size="lg" href="/projects">
					View All Projects
					<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-2">
						<path d="M5 12h14"></path>
						<path d="m12 5 7 7-7 7"></path>
					</svg>
				</Button>
			</div>
		</div>
	</section>
)}
